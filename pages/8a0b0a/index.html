<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack 解析 | 三行代码</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Web development, Frontend, JavaScript">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.c149dbaa.css" as="style"><link rel="preload" href="/assets/js/app.c17531b4.js" as="script"><link rel="preload" href="/assets/js/2.3e7b8786.js" as="script"><link rel="preload" href="/assets/js/28.4aff2d40.js" as="script"><link rel="prefetch" href="/assets/js/10.2234e2c8.js"><link rel="prefetch" href="/assets/js/100.42ab15ac.js"><link rel="prefetch" href="/assets/js/101.e6fef504.js"><link rel="prefetch" href="/assets/js/11.14461477.js"><link rel="prefetch" href="/assets/js/12.157d8dc0.js"><link rel="prefetch" href="/assets/js/13.a7890c3d.js"><link rel="prefetch" href="/assets/js/14.d0894eb7.js"><link rel="prefetch" href="/assets/js/15.bb14362f.js"><link rel="prefetch" href="/assets/js/16.e34746ec.js"><link rel="prefetch" href="/assets/js/17.ca83e363.js"><link rel="prefetch" href="/assets/js/18.9a14520a.js"><link rel="prefetch" href="/assets/js/19.ceb87610.js"><link rel="prefetch" href="/assets/js/20.0d0d893e.js"><link rel="prefetch" href="/assets/js/21.a2cae791.js"><link rel="prefetch" href="/assets/js/22.9bd77fe5.js"><link rel="prefetch" href="/assets/js/23.3ca57ee7.js"><link rel="prefetch" href="/assets/js/24.5df7731a.js"><link rel="prefetch" href="/assets/js/25.becd8254.js"><link rel="prefetch" href="/assets/js/26.21837df4.js"><link rel="prefetch" href="/assets/js/27.12585d76.js"><link rel="prefetch" href="/assets/js/29.606a725e.js"><link rel="prefetch" href="/assets/js/3.953185bb.js"><link rel="prefetch" href="/assets/js/30.281826a9.js"><link rel="prefetch" href="/assets/js/31.3e0344fb.js"><link rel="prefetch" href="/assets/js/32.1ef62439.js"><link rel="prefetch" href="/assets/js/33.7f023c0c.js"><link rel="prefetch" href="/assets/js/34.ad479baf.js"><link rel="prefetch" href="/assets/js/35.dc52b883.js"><link rel="prefetch" href="/assets/js/36.a8a20daf.js"><link rel="prefetch" href="/assets/js/37.c33aae67.js"><link rel="prefetch" href="/assets/js/38.d458af07.js"><link rel="prefetch" href="/assets/js/39.668922f9.js"><link rel="prefetch" href="/assets/js/4.c115e727.js"><link rel="prefetch" href="/assets/js/40.dd259277.js"><link rel="prefetch" href="/assets/js/41.0685dabf.js"><link rel="prefetch" href="/assets/js/42.90bf1511.js"><link rel="prefetch" href="/assets/js/43.81710a1b.js"><link rel="prefetch" href="/assets/js/44.a20853a1.js"><link rel="prefetch" href="/assets/js/45.a0a76abf.js"><link rel="prefetch" href="/assets/js/46.95e74803.js"><link rel="prefetch" href="/assets/js/47.ba80bcea.js"><link rel="prefetch" href="/assets/js/48.ddc3aede.js"><link rel="prefetch" href="/assets/js/49.3040c348.js"><link rel="prefetch" href="/assets/js/5.7d5490f2.js"><link rel="prefetch" href="/assets/js/50.9e45cd68.js"><link rel="prefetch" href="/assets/js/51.3a5eacd8.js"><link rel="prefetch" href="/assets/js/52.2a50b570.js"><link rel="prefetch" href="/assets/js/53.8059a783.js"><link rel="prefetch" href="/assets/js/54.3e54252d.js"><link rel="prefetch" href="/assets/js/55.50b455ff.js"><link rel="prefetch" href="/assets/js/56.43d7e6b7.js"><link rel="prefetch" href="/assets/js/57.dc8bbc95.js"><link rel="prefetch" href="/assets/js/58.c0b76901.js"><link rel="prefetch" href="/assets/js/59.28ec02f3.js"><link rel="prefetch" href="/assets/js/6.8749434b.js"><link rel="prefetch" href="/assets/js/60.001ff532.js"><link rel="prefetch" href="/assets/js/61.b9d6b6db.js"><link rel="prefetch" href="/assets/js/62.81245a10.js"><link rel="prefetch" href="/assets/js/63.8332ae73.js"><link rel="prefetch" href="/assets/js/64.357b1d40.js"><link rel="prefetch" href="/assets/js/65.947a76a1.js"><link rel="prefetch" href="/assets/js/66.59c57da7.js"><link rel="prefetch" href="/assets/js/67.02d525a5.js"><link rel="prefetch" href="/assets/js/68.808b1fd2.js"><link rel="prefetch" href="/assets/js/69.703935c0.js"><link rel="prefetch" href="/assets/js/7.7aa8fb69.js"><link rel="prefetch" href="/assets/js/70.9c6a4dbf.js"><link rel="prefetch" href="/assets/js/71.955445a1.js"><link rel="prefetch" href="/assets/js/72.5ae810be.js"><link rel="prefetch" href="/assets/js/73.40b461f0.js"><link rel="prefetch" href="/assets/js/74.eb777c24.js"><link rel="prefetch" href="/assets/js/75.cf25358f.js"><link rel="prefetch" href="/assets/js/76.f2b37de5.js"><link rel="prefetch" href="/assets/js/77.5db6e6e5.js"><link rel="prefetch" href="/assets/js/78.2fcfdf72.js"><link rel="prefetch" href="/assets/js/79.501697d3.js"><link rel="prefetch" href="/assets/js/8.6aee0b06.js"><link rel="prefetch" href="/assets/js/80.1c75a4c9.js"><link rel="prefetch" href="/assets/js/81.eb9a1728.js"><link rel="prefetch" href="/assets/js/82.d18239f7.js"><link rel="prefetch" href="/assets/js/83.b4360fed.js"><link rel="prefetch" href="/assets/js/84.206370c0.js"><link rel="prefetch" href="/assets/js/85.7ef6ce1f.js"><link rel="prefetch" href="/assets/js/86.711072c9.js"><link rel="prefetch" href="/assets/js/87.8db4bcfa.js"><link rel="prefetch" href="/assets/js/88.d23ba184.js"><link rel="prefetch" href="/assets/js/89.9cd79b2e.js"><link rel="prefetch" href="/assets/js/9.9d5551f6.js"><link rel="prefetch" href="/assets/js/90.1000b730.js"><link rel="prefetch" href="/assets/js/91.0c90c597.js"><link rel="prefetch" href="/assets/js/92.e6b9a689.js"><link rel="prefetch" href="/assets/js/93.3ba18b6b.js"><link rel="prefetch" href="/assets/js/94.8eb468d2.js"><link rel="prefetch" href="/assets/js/95.7b5e4261.js"><link rel="prefetch" href="/assets/js/96.6d0c67f2.js"><link rel="prefetch" href="/assets/js/97.98f63f27.js"><link rel="prefetch" href="/assets/js/98.f7445085.js"><link rel="prefetch" href="/assets/js/99.f9a1abbd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c149dbaa.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/artoriaschan/image-hosting@master/blog/20200105104632.15vzpyhnwvuk.png" alt="三行代码" class="logo"> <span class="site-name can-hide">三行代码</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d533f9/" class="nav-link">基础知识</a></li><li class="dropdown-subitem"><a href="/pages/6d91ad/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/c5fd6c/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8da03e/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/pages/28de07/" class="nav-link">杂谈</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/vue2/" class="nav-link">Vue 2 源码解析</a></li><li class="dropdown-subitem"><a href="/note/vue3/" class="nav-link">Vue 3 源码解析</a></li><li class="dropdown-subitem"><a href="/note/react17/" class="nav-link">React 17 源码解析</a></li><li class="dropdown-subitem"><a href="/note/vite/" class="nav-link">Vite 源码解析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/9f15c1a281d8bedb/" class="nav-link">Stylus</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/33969f/" class="nav-link">Interview</a></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/rust-notes/" class="nav-link">Rust 学习笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="转载" class="dropdown-title"><a href="/reship/" class="link-title">转载</a> <span class="title" style="display:none;">转载</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ed5303/" class="nav-link">前端精读</a></li></ul></div></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/artoriaschan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/artoriaschan/image-hosting@master/blog/WechatIMG1.6c8n1rhrpqg0.jpeg"> <div class="blogger-info"><h3>陈先生</h3> <span>☭ 让我们一起粉碎资本主义吧， 达瓦里氏！☭</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d533f9/" class="nav-link">基础知识</a></li><li class="dropdown-subitem"><a href="/pages/6d91ad/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/c5fd6c/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8da03e/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/pages/28de07/" class="nav-link">杂谈</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/vue2/" class="nav-link">Vue 2 源码解析</a></li><li class="dropdown-subitem"><a href="/note/vue3/" class="nav-link">Vue 3 源码解析</a></li><li class="dropdown-subitem"><a href="/note/react17/" class="nav-link">React 17 源码解析</a></li><li class="dropdown-subitem"><a href="/note/vite/" class="nav-link">Vite 源码解析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/9f15c1a281d8bedb/" class="nav-link">Stylus</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/33969f/" class="nav-link">Interview</a></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/rust-notes/" class="nav-link">Rust 学习笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="转载" class="dropdown-title"><a href="/reship/" class="link-title">转载</a> <span class="title" style="display:none;">转载</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ed5303/" class="nav-link">前端精读</a></li></ul></div></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/artoriaschan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack 解析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8a0b0a/#整体结构" class="sidebar-link">整体结构</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/8a0b0a/#webpack-原理" class="sidebar-link">Webpack 原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#流程概括" class="sidebar-link">流程概括</a></li><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#流程细节" class="sidebar-link">流程细节</a></li><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#初始化阶段" class="sidebar-link">初始化阶段</a></li><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#编译阶段" class="sidebar-link">编译阶段</a></li><li class="sidebar-sub-header"><a href="/pages/8a0b0a/#输出阶段" class="sidebar-link">输出阶段</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/web" title="前端-目录页" data-v-1cd794fe>前端</a></li> <li data-v-1cd794fe><a href="/web/#JavaScript文章" title="前端#JavaScript文章" data-v-1cd794fe>JavaScript文章</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/artoriaschan" target="_blank" title="作者" class="beLink" data-v-1cd794fe>Artorias Chan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2020-10-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><!---->
          Webpack 解析
        </h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="整体结构"><a href="#整体结构" class="header-anchor">#</a> 整体结构</h2> <p>《Webpack 实战》的大致结构和笔记如图：</p> <p><img src="https://cdn.jsdelivr.net/gh/artoriaschan/image-hosting@master/blog/action-in-webpack.gx0kuucpdtk.webp" alt="action-in-webpack"></p> <h2 id="webpack-原理"><a href="#webpack-原理" class="header-anchor">#</a> Webpack 原理</h2> <p>Webpack 通过 tapable 将实现与流程解耦，所有具体实现通过插件的形式存在。tapable 是一个类似于 Node.js 中的 EventEmitter的库，但更专注于自定义事件的触发和处理。</p> <p>tapable 中主要提供了同步与异步两种钩子。</p> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <ul><li><strong>Entry</strong>：入口，Webpack 执行构建的第一步将从 <code>Entry</code> 开始，可抽象成输入。</li> <li><strong>Module</strong>：模块，在 <code>Webpack</code> 里一切皆模块，一个模块对应着一个文件。 <code>Webpack</code> 会从配置的 <code>Entry</code> 开始递归找出所有依赖的模块。</li> <li><strong>Chunk</strong>：代码块，一个 <code>Chunk</code> 由多个模块组合而成，用于代码合并与分割。</li> <li><strong>Loader</strong>：模块 <code>转换</code> 器，用于把模块原内容按照需求转换成新内容。</li> <li><strong>Plugin</strong>：扩展插件，在 <code>Webpack</code> 构建流程中的特定时机会 <code>广播</code> 出对应的 <code>事件</code> ， <code>插件</code> 可以 <code>监听</code> 这些事件的发生，在特定时机做对应的事情。</li></ul> <h3 id="流程概括"><a href="#流程概括" class="header-anchor">#</a> 流程概括</h3> <p>Webpack 的运行流程是一个<strong>串行</strong>的过程，从启动到结束会依次执行以下流程：</p> <ul><li><ol><li><strong>初始化参数</strong>：从配置文件和 shell 语句中读取与合并参数，<strong>得出最终的参数</strong>；</li></ol></li> <li><ol start="2"><li><strong>开始编译</strong>：用上一步得到的参数<strong>初始化 Compiler 对象</strong>，<strong>加载所有配置的插件</strong>，执行对象的 <code>run</code> 方法开始执行编译；</li></ol></li> <li><ol start="3"><li><strong>确定入口</strong>：根据配置中的 <code>entry</code> 找出所有的入口文件；</li></ol></li> <li><ol start="4"><li><strong>编译模块</strong>：从入口文件出发，<strong>调用所有配置的 Loader 对模块进行翻译</strong>，再找出该模块依赖的模块，再<strong>递归</strong>本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li></ol></li> <li><ol start="5"><li><strong>完成模块编译</strong>：在经过第4步使用 <code>Loader</code> 翻译完所有模块后，<strong>得到了每个模块被翻译后的最终内容以及它们之间的依赖关系</strong>；</li></ol></li> <li><ol start="6"><li><strong>输出资源</strong>：根据入口和模块之间的依赖关系，<strong>组装成一个个包含多个模块的 Chunk</strong>，<strong>再把每个 Chunk 转换成一个单独的文件加入到输出列表</strong>，这步是可以修改输出内容的最后机会；</li></ol></li> <li><ol start="7"><li><strong>输出完成</strong>：在确定好输出内容后，<strong>根据配置确定输出的路径和文件名</strong>，把文件内容写入到文件系统。</li></ol></li></ul> <p>在以上过程中， <code>Webpack</code> 会在<strong>特定的时间点广播出特定的事件</strong>，<strong>插件在监听到感兴趣的事件后会执行特定的逻辑</strong>，并且插件可以调用 <code>Webpack</code> 提供的 <code>API</code> 改变 <code>s</code> 的运行结果。</p> <h3 id="流程细节"><a href="#流程细节" class="header-anchor">#</a> 流程细节</h3> <p>Webpack 的构建流程可以分为以下三大阶段：</p> <ul><li><ol><li><strong>初始化</strong>：启动构建，<strong>读取与合并配置参数，加载 Plugin，实例化 Compiler。</strong></li></ol></li> <li><ol start="2"><li><strong>编译</strong>：从 <code>Entry</code> 发出，针对每个 <code>Module</code> <strong>串行</strong>调用对应的 <code>Loader</code> 去翻译文件内容，再找到该 <code>Module</code> 依赖的 <code>Module</code> ，<strong>递归地进行编译处理</strong>。</li></ol></li> <li><ol start="3"><li><strong>输出</strong>：对编译后的 <code>Module</code> 组合成 <code>Chunk</code> ，把 <code>Chunk</code> 转换成文件，输出到文件系统。
<img src="data:image/png;base64,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" alt="simple-flow"></li></ol></li></ul> <h3 id="初始化阶段"><a href="#初始化阶段" class="header-anchor">#</a> 初始化阶段</h3> <table><thead><tr><th>事件名</th> <th>解释</th></tr></thead> <tbody><tr><td>初始化参数</td> <td>从配置文件和 Shell 语句中读取与合并参数，得出最终的参数。 这个过程中还会执行配置文件中的插件实例化语句 <code>new Plugin()</code>。</td></tr> <tr><td>实例化 <code>Compiler</code></td> <td>用上一步得到的参数初始化 <code>Compiler</code> 实例， <code>Compiler</code> 负责文件监听和启动编译。 <code>Compiler</code> 实例中包含了完整的 <code>Webpack</code> 配置，全局只有一个 <code>Compiler</code> 实例。</td></tr> <tr><td>加载插件</td> <td>依次调用插件的 <code>apply</code> 方法，让插件可以监听后续的所有事件节点。同时给插件传入 <code>compiler</code> 实例的引用，以方便插件通过 <code>compiler</code> 调用 <code>Webpack</code> 提供的 <code>API</code> 。</td></tr> <tr><td><code>environment</code></td> <td>开始应用 <code>Node.js</code> 风格的文件系统到 <code>compiler</code> 对象，以方便后续的文件寻找和读取。</td></tr> <tr><td><code>entry-option</code></td> <td>读取配置的 <code>Entrys</code> ，为每个 <code>Entry</code> 实例化一个对应的 <code>EntryPlugin</code> ，为后面该 <code>Entry</code> 的递归解析工作做准备。</td></tr> <tr><td><code>after-plugins</code></td> <td>调用完所有内置的和配置的插件的 <code>apply</code> 方法。</td></tr> <tr><td><code>after-resolvers</code></td> <td>根据配置初始化完 <code>resolver</code> ， <code>resolver</code> 负责在文件系统中寻找 <code>指定路径</code> 的文件。</td></tr></tbody></table> <h3 id="编译阶段"><a href="#编译阶段" class="header-anchor">#</a> 编译阶段</h3> <table><thead><tr><th>事件名</th> <th>解释</th></tr></thead> <tbody><tr><td><code>run</code></td> <td>启动一次新的编译。</td></tr> <tr><td><code>watch-run</code></td> <td>和 <code>run</code> 类似，区别在于它是在 <code>监听模式</code> 下启动的编译，在这个事件中可以获取到是哪些文件发生了变化导致重新启动一次新的编译。</td></tr> <tr><td><code>compile</code></td> <td>该事件是为了告诉插件一次新的编译将要启动，同时会给插件带上 <code>compiler</code> 对象。</td></tr> <tr><td><code>compilation</code></td> <td>当 <code>Webpack</code> 以开发模式运行时，每当检测到文件变化，一次新的 <code>Compilation</code> 将被创建。一个 <code>Compilation</code> 对象包含了当前的 <code>模块资源</code> 、 <code>编译生成资源</code> 、 <code>变化的文件</code> 等。 <code>Compilation</code> 对象也提供了很多事件回调供插件做扩展。</td></tr> <tr><td><code>make</code></td> <td>一个新的 <code>Compilation</code> 创建完毕，即将从 <code>Entry</code> 开始读取文件，根据文件类型和配置的 <code>Loader</code> 对文件进行编译，编译完后再找出该文件依赖的文件，递归的编译和解析。</td></tr> <tr><td><code>after-compile</code></td> <td>一次 <code>Compilation</code> 执行完成。</td></tr> <tr><td><code>invalid</code></td> <td>当遇到文件不存在、文件编译错误等异常时会触发该事件，该事件不会导致 <code>Webpack</code> 退出。</td></tr></tbody></table> <p>在编译阶段中，最重要的要数 <strong>compilation</strong> 事件了，因为在 <code>compilation</code> 阶段调用了 <code>Loader</code> 完成了每个模块的转换操作，在 <code>compilation</code> 阶段又包括很多小的事件，它们分别是：</p> <table><thead><tr><th>事件名</th> <th>解释</th></tr></thead> <tbody><tr><td><code>build-module</code></td> <td>使用对应的 <code>Loader</code> 去转换一个模块。</td></tr> <tr><td><code>normal-module-loader</code></td> <td>在用 <code>Loader</code> 对一个模块转换完后，使用 <code>acorn</code> 解析转换后的内容，输出对应的抽象语法树（AST），以方便 <code>Webpack</code> 后面对代码的分析。</td></tr> <tr><td><code>program</code></td> <td>从配置的入口模块开始，分析其 <code>AST</code> ，当遇到 <code>require</code> 等导入其它模块语句时，便将其加入到依赖的模块列表，同时对新找出的依赖模块递归分析，最终搞清所有模块的依赖关系。</td></tr> <tr><td><code>seal</code></td> <td>所有模块及其依赖的模块都通过 <code>Loader</code> 转换完成后，根据依赖关系开始生成 <code>Chunk</code> 。</td></tr></tbody></table> <h3 id="输出阶段"><a href="#输出阶段" class="header-anchor">#</a> 输出阶段</h3> <table><thead><tr><th>事件名</th> <th>解释</th></tr></thead> <tbody><tr><td><code>should-emit</code></td> <td>所有需要输出的文件已经生成好，询问插件哪些文件需要输出，哪些不需要。</td></tr> <tr><td><code>emit</code></td> <td>确定好要输出哪些文件后，执行文件输出，可以在这里获取和修改输出内容。</td></tr> <tr><td><code>after-emit</code></td> <td>文件输出完毕。</td></tr> <tr><td><code>done</code></td> <td>成功完成一次完成的编译和输出流程。</td></tr> <tr><td><code>failed</code></td> <td>如果在编译和输出流程中遇到异常导致 Webpack 退出时，就会直接跳转到本步骤，插件可以在本事件中获取到具体的错误原因。</td></tr></tbody></table> <p>一次完整的编译触发的事件流程如图所示：
<img src="/assets/img/event-flow.55732d79.png" alt="event-flow"></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/artoriaschan/edit/master/src/01.前端/02.JavaScript文章/09.Webpack 解析.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Webpack" title="标签">#Webpack</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/07/23, 17:53:01</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:dalecracker@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/artoriaschan" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2018-2022
    <span>Artorias Chan | <a href="https://raw.githubusercontent.com/artoriaschan/blog/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c17531b4.js" defer></script><script src="/assets/js/2.3e7b8786.js" defer></script><script src="/assets/js/28.4aff2d40.js" defer></script>
  </body>
</html>