(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{532:function(t,s,a){t.exports=a.p+"assets/img/frame.15f1b594.png"},533:function(t,s,a){t.exports=a.p+"assets/img/v15-example-1.506e7c1d.png"},534:function(t,s,a){t.exports=a.p+"assets/img/v15-example-2.6699f462.png"},535:function(t,s,a){t.exports=a.p+"assets/img/v16-example.c55d5087.png"},536:function(t,s,a){t.exports=a.p+"assets/img/fiber-tree.1502d674.png"},537:function(t,s,a){t.exports=a.p+"assets/img/mount-fiber-tree-1.0a6be4b7.png"},538:function(t,s,a){t.exports=a.p+"assets/img/mount-fiber-tree-2.4dac1618.png"},539:function(t,s,a){t.exports=a.p+"assets/img/mount-fiber-tree-3.c5f06db7.png"},540:function(t,s,a){t.exports=a.p+"assets/img/update-fiber-tree-1.74bae74e.png"},541:function(t,s,a){t.exports=a.p+"assets/img/update-fiber-tree-2.cfa37ae8.png"},667:function(t,s,a){"use strict";a.r(s);var e=a(22),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"å‰è¨€"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬å¯ä»¥ä»"),e("a",{attrs:{href:"https://react.docschina.org/docs/thinking-in-react.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜ç½‘"),e("OutboundLink")],1),t._v("çœ‹åˆ°Reactçš„ç†å¿µï¼š")]),t._v(" "),e("blockquote",[e("p",[t._v("æˆ‘ä»¬è®¤ä¸ºï¼ŒReact æ˜¯ç”¨ JavaScript æ„å»ºå¿«é€Ÿå“åº”çš„å¤§å‹ Web åº”ç”¨ç¨‹åºçš„é¦–é€‰æ–¹å¼ã€‚å®ƒåœ¨ Facebook å’Œ Instagram ä¸Šè¡¨ç°ä¼˜ç§€ã€‚")])]),t._v(" "),e("h2",{attrs:{id:"react-15-x-æ¶æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-15-x-æ¶æ„"}},[t._v("#")]),t._v(" React 15.x æ¶æ„")]),t._v(" "),e("p",[e("code",[t._v("React")]),t._v(" ä» "),e("code",[t._v("v15")]),t._v(" å‡çº§åˆ° "),e("code",[t._v("v16")]),t._v(" åé‡æ„äº†æ•´ä¸ªæ¶æ„ã€‚æœ¬èŠ‚æˆ‘ä»¬èŠèŠ "),e("code",[t._v("v15")]),t._v(" ï¼Œçœ‹çœ‹ä»–ä¸ºä»€ä¹ˆä¸èƒ½æ»¡è¶³é€Ÿåº¦å¿«ï¼Œå“åº”è‡ªç„¶çš„ç†å¿µï¼Œä»¥è‡³äºè¢«é‡æ„ã€‚")]),t._v(" "),e("p",[e("code",[t._v("React v15")]),t._v(" æ¶æ„å¯ä»¥åˆ†ä¸ºä¸¤å±‚ï¼š")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Reconciler")]),t._v("ï¼ˆåè°ƒå™¨ï¼‰â€”â€” è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶")]),t._v(" "),e("li",[e("strong",[t._v("Renderer")]),t._v("ï¼ˆæ¸²æŸ“å™¨ï¼‰â€”â€” è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š")])]),t._v(" "),e("h3",{attrs:{id:"reconciler-åè°ƒå™¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reconciler-åè°ƒå™¨"}},[t._v("#")]),t._v(" Reconcilerï¼ˆåè°ƒå™¨ï¼‰")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ "),e("code",[t._v("React")]),t._v(" ä¸­å¯ä»¥é€šè¿‡ "),e("code",[t._v("this.setState")]),t._v(" ã€ "),e("code",[t._v("this.forceUpdate")]),t._v(" ã€ "),e("code",[t._v("ReactDOM.render")]),t._v(" ç­‰APIè§¦å‘æ›´æ–°ã€‚")]),t._v(" "),e("p",[t._v("æ¯å½“æœ‰æ›´æ–°å‘ç”Ÿæ—¶ï¼Œ "),e("code",[t._v("Reconciler")]),t._v(" ä¼šåšå¦‚ä¸‹å·¥ä½œï¼š")]),t._v(" "),e("ul",[e("li",[t._v("è°ƒç”¨å‡½æ•°ç»„ä»¶ã€æˆ– "),e("code",[t._v("class")]),t._v(" ç»„ä»¶çš„ "),e("code",[t._v("render")]),t._v(" æ–¹æ³•ï¼Œå°†è¿”å›çš„ "),e("code",[t._v("JSX")]),t._v(" è½¬åŒ–ä¸º "),e("code",[t._v("è™šæ‹ŸDOM")])]),t._v(" "),e("li",[t._v("å°† "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" å’Œä¸Šæ¬¡æ›´æ–°æ—¶çš„ "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" å¯¹æ¯”")]),t._v(" "),e("li",[t._v("é€šè¿‡å¯¹æ¯”æ‰¾å‡ºæœ¬æ¬¡æ›´æ–°ä¸­å˜åŒ–çš„ "),e("code",[t._v("è™šæ‹ŸDOM")])]),t._v(" "),e("li",[t._v("é€šçŸ¥ "),e("code",[t._v("Renderer")]),t._v(" å°†å˜åŒ–çš„ "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" æ¸²æŸ“åˆ°é¡µé¢ä¸Š")])]),t._v(" "),e("h3",{attrs:{id:"renderer-æ¸²æŸ“å™¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renderer-æ¸²æŸ“å™¨"}},[t._v("#")]),t._v(" Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰")]),t._v(" "),e("p",[t._v("ç”±äº "),e("code",[t._v("React")]),t._v(" æ”¯æŒè·¨å¹³å°ï¼Œæ‰€ä»¥ä¸åŒå¹³å°æœ‰ä¸åŒçš„ "),e("code",[t._v("Renderer")]),t._v(" ã€‚æˆ‘ä»¬å‰ç«¯æœ€ç†Ÿæ‚‰çš„æ˜¯è´Ÿè´£åœ¨æµè§ˆå™¨ç¯å¢ƒæ¸²æŸ“çš„ "),e("code",[t._v("Renderer")]),t._v(" â€”â€” "),e("a",{attrs:{href:"https://www.npmjs.com/package/react-dom",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactDOM"),e("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),e("p",[t._v("é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼š")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.npmjs.com/package/react-native",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactNative"),e("OutboundLink")],1),t._v("æ¸²æŸ“å™¨ï¼Œæ¸²æŸ“AppåŸç”Ÿç»„ä»¶")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.npmjs.com/package/react-test-renderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactTest"),e("OutboundLink")],1),t._v("æ¸²æŸ“å™¨ï¼Œæ¸²æŸ“å‡ºçº¯Jså¯¹è±¡ç”¨äºæµ‹è¯•")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.npmjs.com/package/react-art",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactArt"),e("OutboundLink")],1),t._v("æ¸²æŸ“å™¨ï¼Œæ¸²æŸ“åˆ°Canvas, SVG æˆ– VML (IE8)\nåœ¨æ¯æ¬¡æ›´æ–°å‘ç”Ÿæ—¶ï¼Œ "),e("code",[t._v("Renderer")]),t._v(" æ¥åˆ° "),e("code",[t._v("Reconciler")]),t._v(" é€šçŸ¥ï¼Œå°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åœ¨å½“å‰å®¿ä¸»ç¯å¢ƒã€‚")])]),t._v(" "),e("h3",{attrs:{id:"react-15æ¶æ„çš„ç¼ºç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-15æ¶æ„çš„ç¼ºç‚¹"}},[t._v("#")]),t._v(" React 15æ¶æ„çš„ç¼ºç‚¹")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("Reconciler")]),t._v(" ä¸­ï¼Œ "),e("code",[t._v("mount")]),t._v(" çš„ç»„ä»¶ä¼šè°ƒç”¨"),e("a",{attrs:{href:"https://github.com/facebook/react/blob/15-stable/src/renderers/dom/shared/ReactDOMComponent.js#L498",target:"_blank",rel:"noopener noreferrer"}},[t._v("mountComponent"),e("OutboundLink")],1),t._v("ï¼Œ "),e("code",[t._v("update")]),t._v(" çš„ç»„ä»¶ä¼šè°ƒç”¨"),e("a",{attrs:{href:"https://github.com/facebook/react/blob/15-stable/src/renderers/dom/shared/ReactDOMComponent.js#L877",target:"_blank",rel:"noopener noreferrer"}},[t._v("updateComponent"),e("OutboundLink")],1),t._v("ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼š "),e("code",[t._v("é€’å½’")]),t._v(" æ›´æ–°å­ç»„ä»¶ã€‚")]),t._v(" "),e("h4",{attrs:{id:"é€’å½’æ›´æ–°çš„ç¼ºç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é€’å½’æ›´æ–°çš„ç¼ºç‚¹"}},[t._v("#")]),t._v(" é€’å½’æ›´æ–°çš„ç¼ºç‚¹")]),t._v(" "),e("p",[t._v("ä¸»æµçš„æµè§ˆå™¨åˆ·æ–°é¢‘ç‡ä¸º "),e("code",[t._v("60Hz")]),t._v(" ï¼Œå³æ¯16.6msï¼ˆ1000ms / 60Hzï¼‰æµè§ˆå™¨åˆ·æ–°ä¸€æ¬¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ "),e("code",[t._v("JS")]),t._v(" å¯ä»¥æ“ä½œ "),e("code",[t._v("DOM")]),t._v(" ï¼Œ "),e("code",[t._v("GUI")]),t._v(" æ¸²æŸ“çº¿ç¨‹ä¸ "),e("code",[t._v("JS")]),t._v(" çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚æ‰€ä»¥ "),e("code",[t._v("JS")]),t._v(" è„šæœ¬æ‰§è¡Œå’Œæµè§ˆå™¨å¸ƒå±€ã€ç»˜åˆ¶ä¸èƒ½åŒæ—¶æ‰§è¡Œã€‚")]),t._v(" "),e("p",[t._v("åœ¨æ¯16.6msæ—¶é—´å†…ï¼Œéœ€è¦å®Œæˆå¦‚ä¸‹å·¥ä½œï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:a(532),alt:"frame"}})]),t._v(" "),e("p",[t._v("å½“JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¶…å‡ºäº†16.6msï¼Œè¿™æ¬¡åˆ·æ–°å°±æ²¡æœ‰æ—¶é—´æ‰§è¡Œæ ·å¼å¸ƒå±€å’Œæ ·å¼ç»˜åˆ¶äº†ã€‚")]),t._v(" "),e("p",[t._v("å¯¹äºReactçš„æ›´æ–°æ¥è¯´ï¼Œç”±äº "),e("code",[t._v("é€’å½’æ‰§è¡Œ")]),t._v(" ï¼Œæ‰€ä»¥æ›´æ–°ä¸€æ—¦å¼€å§‹ï¼Œä¸­é€”å°±æ— æ³•ä¸­æ–­ã€‚å½“å±‚çº§å¾ˆæ·±æ—¶ï¼Œé€’å½’æ›´æ–°æ—¶é—´è¶…è¿‡äº†16msï¼Œç”¨æˆ·äº¤äº’å°±ä¼šå¡é¡¿ã€‚")]),t._v(" "),e("p",[t._v("é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æå‡ºäº†è§£å†³åŠæ³•ï¼šç”¨ "),e("code",[t._v("å¯ä¸­æ–­")]),t._v(" çš„å¼‚æ­¥æ›´æ–°ä»£æ›¿åŒæ­¥çš„æ›´æ–°ã€‚é‚£ä¹ˆ "),e("code",[t._v("React 15")]),t._v(" çš„æ¶æ„æ”¯æŒå¼‚æ­¥æ›´æ–°ä¹ˆï¼Ÿæ˜¯ä¸èƒ½çš„ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š")]),t._v(" "),e("div",{staticClass:"language-jsx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),e("span",{pre:!0,attrs:{class:"token script language-javascript"}},[e("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("ä¹˜ä»¥")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br")])]),e("p",[t._v("æˆ‘ç”¨çº¢è‰²æ ‡æ³¨äº†æ›´æ–°çš„æ­¥éª¤ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:a(533),alt:"v15-example-1"}})]),t._v(" "),e("p",[t._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ "),e("code",[t._v("Reconciler")]),t._v(" å’Œ "),e("code",[t._v("Renderer")]),t._v(" æ˜¯ "),e("code",[t._v("äº¤æ›¿å·¥ä½œ")]),t._v(" çš„ï¼Œå½“ç¬¬ä¸€ä¸ª "),e("code",[t._v("li")]),t._v(" åœ¨é¡µé¢ä¸Šå·²ç»å˜åŒ–åï¼Œç¬¬äºŒä¸ª "),e("code",[t._v("li")]),t._v(" å†è¿›å…¥ "),e("code",[t._v("Reconciler")]),t._v(" ã€‚")]),t._v(" "),e("p",[t._v("ç”±äºæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·çœ‹æ¥æ‰€æœ‰ "),e("code",[t._v("DOM")]),t._v(" æ˜¯åŒæ—¶æ›´æ–°çš„ã€‚")]),t._v(" "),e("p",[t._v("è®©æˆ‘ä»¬çœ‹çœ‹åœ¨ "),e("code",[t._v("React v15")]),t._v(" æ¶æ„ä¸­å¦‚æœä¸­é€”ä¸­æ–­æ›´æ–°ä¼šæ€ä¹ˆæ ·ï¼Ÿ")]),t._v(" "),e("p",[e("img",{attrs:{src:a(534),alt:"v15-example-2"}})]),t._v(" "),e("p",[t._v("å½“ç¬¬ä¸€ä¸ªliå®Œæˆæ›´æ–°æ—¶ä¸­æ–­æ›´æ–°ï¼Œå³æ­¥éª¤3å®Œæˆåä¸­æ–­æ›´æ–°ï¼Œæ­¤æ—¶åé¢çš„æ­¥éª¤éƒ½è¿˜æœªæ‰§è¡Œã€‚")]),t._v(" "),e("p",[t._v("ç”¨æˆ·æœ¬æ¥æœŸæœ› "),e("code",[t._v("123")]),t._v(" å˜ä¸º "),e("code",[t._v("246")]),t._v(" ã€‚å®é™…å´çœ‹è§æ›´æ–°ä¸å®Œå…¨çš„ "),e("code",[t._v("DOM")]),t._v(" ï¼")]),t._v(" "),e("p",[t._v("åŸºäºè¿™ä¸ªåŸå› ï¼Œ "),e("code",[t._v("React")]),t._v(" å†³å®šé‡å†™æ•´ä¸ªæ¶æ„ã€‚")]),t._v(" "),e("h2",{attrs:{id:"react-16-x-æ¶æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-16-x-æ¶æ„"}},[t._v("#")]),t._v(" React 16.x æ¶æ„")]),t._v(" "),e("p",[t._v("React16æ¶æ„å¯ä»¥åˆ†ä¸ºä¸‰å±‚ï¼š")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Scheduler")]),t._v("ï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥Reconciler")]),t._v(" "),e("li",[e("strong",[t._v("Reconciler")]),t._v("ï¼ˆåè°ƒå™¨ï¼‰â€”â€” è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶")]),t._v(" "),e("li",[e("strong",[t._v("Renderer")]),t._v("ï¼ˆæ¸²æŸ“å™¨ï¼‰â€”â€” è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š")])]),t._v(" "),e("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œç›¸è¾ƒäº "),e("code",[t._v("React v15")]),t._v(" ï¼Œ "),e("code",[t._v("React v16")]),t._v(" ä¸­æ–°å¢äº† "),e("strong",[t._v("Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰")]),t._v("ï¼Œè®©æˆ‘ä»¬æ¥äº†è§£ä¸‹ä»–ã€‚")]),t._v(" "),e("h3",{attrs:{id:"scheduler-è°ƒåº¦å™¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scheduler-è°ƒåº¦å™¨"}},[t._v("#")]),t._v(" Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("React v16")]),t._v(" ä¸­æ‰€æœ‰æœ‰å…³ "),e("code",[t._v("Scheduler")]),t._v("(è°ƒåº¦å™¨) çš„å®ç°éƒ½åœ¨ "),e("code",[t._v("packages/scheduler")]),t._v(" ä¸­ï¼Œ"),e("a",{attrs:{href:"https://www.npmjs.com/package/scheduler",target:"_blank",rel:"noopener noreferrer"}},[t._v("scheduler"),e("OutboundLink")],1),t._v("æ˜¯ç‹¬ç«‹äº"),e("code",[t._v("React")]),t._v("çš„åº“ã€‚")]),t._v(" "),e("p",[t._v("æ—¢ç„¶æˆ‘ä»¬"),e("strong",[t._v("ä»¥æµè§ˆå™¨æ˜¯å¦æœ‰å‰©ä½™æ—¶é—´ä½œä¸ºä»»åŠ¡ä¸­æ–­çš„æ ‡å‡†")]),t._v("ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå½“æµè§ˆå™¨æœ‰å‰©ä½™æ—¶é—´æ—¶é€šçŸ¥æˆ‘ä»¬ã€‚")]),t._v(" "),e("p",[t._v("å…¶å®éƒ¨åˆ†æµè§ˆå™¨å·²ç»å®ç°äº†è¿™ä¸ª "),e("code",[t._v("API")]),t._v(" ï¼Œè¿™å°±æ˜¯"),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback",target:"_blank",rel:"noopener noreferrer"}},[t._v("requestIdleCallback"),e("OutboundLink")],1),t._v("ã€‚ä½†æ˜¯ç”±äºä»¥ä¸‹å› ç´ ï¼Œ"),e("code",[t._v("React v16")]),t._v(" æ”¾å¼ƒä½¿ç”¨ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜")]),t._v(" "),e("li",[t._v("è§¦å‘é¢‘ç‡ä¸ç¨³å®šï¼Œå—å¾ˆå¤šå› ç´ å½±å“ã€‚æ¯”å¦‚å½“æˆ‘ä»¬çš„æµè§ˆå™¨ "),e("code",[t._v("åˆ‡æ¢tab")]),t._v(" åï¼Œä¹‹å‰tabæ³¨å†Œçš„ "),e("code",[t._v("requestIdleCallback")]),t._v(" è§¦å‘çš„é¢‘ç‡ä¼šå˜å¾—å¾ˆä½")])]),t._v(" "),e("p",[t._v("å…³äºè¯¥ "),e("code",[t._v("requestIdleCallback")]),t._v(" è¯¦ç»†çš„è§£è¯»å¯ä»¥çœ‹ä¸€ä¸‹ä¹‹å‰çš„"),e("a",{attrs:{href:"https://artoriaschan.github.io/blog/2019/05/03/requestidlecallback/",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡ç« "),e("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),e("p",[t._v("åŸºäºä»¥ä¸ŠåŸå› ï¼Œ"),e("code",[t._v("React v16")]),t._v(" å®ç°äº†åŠŸèƒ½æ›´å®Œå¤‡çš„ "),e("code",[t._v("requestIdleCallbackpolyfill")]),t._v(" ï¼Œè¿™å°±æ˜¯ "),e("code",[t._v("Scheduler")]),t._v(" ã€‚é™¤äº†åœ¨ç©ºé—²æ—¶è§¦å‘å›è°ƒçš„åŠŸèƒ½å¤–ï¼Œ "),e("code",[t._v("Scheduler")]),t._v(" è¿˜æä¾›äº†å¤šç§è°ƒåº¦ä¼˜å…ˆçº§ä¾›ä»»åŠ¡è®¾ç½®ã€‚")]),t._v(" "),e("h3",{attrs:{id:"reconciler-åè°ƒå™¨-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reconciler-åè°ƒå™¨-2"}},[t._v("#")]),t._v(" Reconcilerï¼ˆåè°ƒå™¨ï¼‰")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ "),e("code",[t._v("React v15")]),t._v(" ä¸­ "),e("code",[t._v("Reconciler")]),t._v(" æ˜¯é€’å½’å¤„ç† "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ "),e("code",[t._v("React V16")]),t._v(" çš„ "),e("a",{attrs:{href:"https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L1646",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reconciler"),e("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("ç”±äº Reconciler ä¹Ÿæ˜¯å¹³å°æ— å…³çš„ï¼Œæ‰€ä»¥ React ä¸ºä»–ä»¬å•ç‹¬å‘äº†ä¸€ä¸ªåŒ…"),e("a",{attrs:{href:"https://www.npmjs.com/package/react-reconciler",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-Reconciler"),e("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),e("p",[t._v("æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œæ›´æ–°å·¥ä½œä»é€’å½’å˜æˆäº†å¯ä»¥ä¸­æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚æ¯æ¬¡å¾ªç¯éƒ½ä¼šè°ƒç”¨ "),e("code",[t._v("shouldYield")]),t._v(" åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰å‰©ä½™æ—¶é—´ã€‚")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** @noinline */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("workLoopConcurrent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Perform work until Scheduler asks us to yield")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldYield")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("performUnitOfWork")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("é‚£ä¹ˆ "),e("code",[t._v("React v16")]),t._v(" æ˜¯å¦‚ä½•è§£å†³ä¸­æ–­æ›´æ–°æ—¶DOMæ¸²æŸ“ä¸å®Œå…¨çš„é—®é¢˜å‘¢ï¼Ÿ")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("React v16")]),t._v(" ä¸­ï¼Œ "),e("code",[t._v("Reconciler")]),t._v(" ä¸ "),e("code",[t._v("Renderer")]),t._v(" ä¸å†æ˜¯äº¤æ›¿å·¥ä½œã€‚å½“ "),e("code",[t._v("Scheduler")]),t._v(" å°†ä»»åŠ¡äº¤ç»™ "),e("code",[t._v("Reconciler")]),t._v(" åï¼Œ "),e("code",[t._v("Reconciler")]),t._v(" ä¼šä¸ºå˜åŒ–çš„ "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" æ‰“ä¸Šä»£è¡¨å¢/åˆ /æ›´æ–°çš„æ ‡è®°ï¼Œç±»ä¼¼è¿™æ ·ï¼š")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// You can change the rest (and add more).")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Placement "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*                    */")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0b0000000000000000010")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Update "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*                       */")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0b0000000000000000100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" PlacementAndUpdate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*           */")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0b0000000000000000110")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Deletion "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*                     */")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0b0000000000000001000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("blockquote",[e("p",[t._v("å…¨éƒ¨çš„"),e("a",{attrs:{href:"https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactFiberFlags.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ ‡è®°"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("æ•´ä¸ª "),e("code",[t._v("Scheduler")]),t._v(" ä¸ "),e("code",[t._v("Reconciler")]),t._v(" çš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œã€‚åªæœ‰å½“æ‰€æœ‰ç»„ä»¶éƒ½å®Œæˆ "),e("code",[t._v("Reconciler")]),t._v(" çš„å·¥ä½œï¼Œæ‰ä¼šç»Ÿä¸€äº¤ç»™ "),e("code",[t._v("Renderer")]),t._v(" ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("ä½ å¯ä»¥åœ¨"),e("a",{attrs:{href:"https://react.docschina.org/docs/codebase-overview.html#fiber-reconciler",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),e("OutboundLink")],1),t._v("çœ‹åˆ° React å®˜æ–¹å¯¹ React v16 Fiber Reconciler çš„è§£é‡Š")])]),t._v(" "),e("h3",{attrs:{id:"renderer-æ¸²æŸ“å™¨-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renderer-æ¸²æŸ“å™¨-2"}},[t._v("#")]),t._v(" Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰")]),t._v(" "),e("p",[e("code",[t._v("Renderer")]),t._v(" æ ¹æ® "),e("code",[t._v("Reconciler")]),t._v(" ä¸ºè™šæ‹ŸDOMæ‰“çš„æ ‡è®°ï¼ŒåŒæ­¥æ‰§è¡Œå¯¹åº”çš„DOMæ“ä½œã€‚")]),t._v(" "),e("p",[t._v("æ‰€ä»¥ï¼Œå¯¹äºæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä½¿ç”¨è¿‡çš„ demo, åœ¨ React 16 æ¶æ„ä¸­æ•´ä¸ªæ›´æ–°æµç¨‹ä¸ºï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:a(535),alt:"v16-example"}})]),t._v(" "),e("p",[t._v("å…¶ä¸­çº¢æ¡†ä¸­çš„æ­¥éª¤éšæ—¶å¯èƒ½ç”±äºä»¥ä¸‹åŸå› è¢«ä¸­æ–­ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("æœ‰å…¶ä»–æ›´é«˜ä¼˜ä»»åŠ¡éœ€è¦å…ˆæ›´æ–°")]),t._v(" "),e("li",[t._v("å½“å‰å¸§æ²¡æœ‰å‰©ä½™æ—¶é—´")])]),t._v(" "),e("p",[t._v("ç”±äºçº¢æ¡†ä¸­çš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸ä¼šæ›´æ–°é¡µé¢ä¸Šçš„DOMï¼Œæ‰€ä»¥å³ä½¿åå¤ä¸­æ–­ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹è§æ›´æ–°ä¸å®Œå…¨çš„DOMï¼ˆå³ä¸Šä¸€èŠ‚æ¼”ç¤ºçš„æƒ…å†µï¼‰ã€‚")]),t._v(" "),e("p",[t._v("ç”±äº "),e("code",[t._v("Reconciler")]),t._v(" æ˜¯ "),e("code",[t._v("React")]),t._v(" å¯¹å¤–æä¾›çš„ç‹¬ç«‹çš„åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…¶å¼€æ”¾çš„ "),e("code",[t._v("API")]),t._v(" ï¼Œè‡ªå®šä¹‰è‡ªå·±çš„ "),e("code",[t._v("Renderer")]),t._v(" ã€‚")]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.youtube.com/watch?reload=9&v=CGpMlWVcHok&list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh&index=7",target:"_blank",rel:"noopener noreferrer"}},[t._v("[Youtube] Building a Custom React Renderer | Sophie Alpert ğŸš€"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"fiber"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fiber"}},[t._v("#")]),t._v(" Fiber")]),t._v(" "),e("p",[t._v("æ ¹æ® "),e("a",{attrs:{href:"https://mobile.twitter.com/dan_abramov",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dan Abramov"),e("OutboundLink")],1),t._v(" åšå®¢ä¸­çš„ä¸€ç¯‡å…³äº"),e("a",{attrs:{href:"https://overreacted.io/algebraic-effects-for-the-rest-of-us/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»£æ•°æ•ˆåº”"),e("OutboundLink")],1),t._v("æ–‡ç« ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ "),e("code",[t._v("React")]),t._v(" æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜ "),e("code",[t._v("Sebastian MarkbÃ¥ge")]),t._v("ï¼ˆReact Hooksçš„å‘æ˜è€…ï¼‰æ›¾è¯´ï¼šæˆ‘ä»¬åœ¨ "),e("code",[t._v("React")]),t._v(" ä¸­åšçš„å°±æ˜¯è·µè¡Œä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰ã€‚")]),t._v(" "),e("p",[t._v("è‡³äºä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ä¸Šæ®µæåˆ°çš„ "),e("code",[t._v("Dan Abramov")]),t._v(" åšå®¢ä¸­çš„é‚£ç¯‡å…³äºä»£æ•°æ•ˆåº”çš„æ–‡ç« ï¼Œè¿™é‡Œä¸è¿‡å¤šçš„å±•å¼€äº†ã€‚å¤§æ¦‚çš„è®²è¿°ä¸€ä¸‹ä»£æ•°æ•ˆåº”ã€‚")]),t._v(" "),e("p",[t._v("ä»£æ•°æ•ˆåº”æ˜¯ä¸€é¡¹ç ”ç©¶ä¸­çš„ç¼–ç¨‹è¯­è¨€ç‰¹æ€§ã€‚å…·ä½“è¡¨ç°ä¸ºå½“ä»£ç é€»è¾‘è¿›å…¥æ•ˆåº”å¤„ç†å™¨åï¼Œåœ¨å¤„ç†å®Œå‰¯ä½œç”¨åè¿”å›ç»§ç»­æ‰§è¡Œå‰©ä½™çš„é€»è¾‘ã€‚å¹¶ä¸”ä»£æ•°æ•ˆåº”è¿™ç§æ–¹å¼å¯ä»¥å°†ä»£ç ä¸­çš„ "),e("code",[t._v("what")]),t._v(" å’Œ "),e("code",[t._v("how")]),t._v(" åˆ†å¼€ï¼Œè¿™è®©ä½ åœ¨å†™ä»£ç æ—¶å¯ä»¥æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åˆ°å…³æ³¨ "),e("code",[t._v("what")]),t._v(" ä¸Šã€‚")]),t._v(" "),e("p",[t._v("React ä¸­çš„ "),e("a",{attrs:{href:"https://react.docschina.org/docs/hooks-intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hooks"),e("OutboundLink")],1),t._v(" å’Œ "),e("a",{attrs:{href:"https://react.docschina.org/docs/concurrent-mode-suspense.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Suspense"),e("OutboundLink")],1),t._v(" çš„çµæ„Ÿéƒ½æ¥è‡ªä»£æ•°æ•ˆåº”ã€‚")]),t._v(" "),e("h3",{attrs:{id:"å¿ƒæ™ºæ¨¡å‹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¿ƒæ™ºæ¨¡å‹"}},[t._v("#")]),t._v(" å¿ƒæ™ºæ¨¡å‹")]),t._v(" "),e("h4",{attrs:{id:"ä»£æ•°æ•ˆåº”å’Œgenerator"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä»£æ•°æ•ˆåº”å’Œgenerator"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ä»£æ•°æ•ˆåº”å’ŒGenerator")])]),t._v(" "),e("p",[t._v("ä» "),e("code",[t._v("React v15")]),t._v(" åˆ° "),e("code",[t._v("React v16")]),t._v(" ï¼Œåè°ƒå™¨ï¼ˆ "),e("code",[t._v("Reconciler")]),t._v(" ï¼‰é‡æ„çš„ä¸€å¤§ç›®çš„æ˜¯ï¼šå°†è€çš„ "),e("code",[t._v("åŒæ­¥æ›´æ–°")]),t._v(" çš„æ¶æ„å˜ä¸º "),e("code",[t._v("å¼‚æ­¥å¯ä¸­æ–­æ›´æ–°")]),t._v(" ã€‚")]),t._v(" "),e("p",[e("code",[t._v("å¼‚æ­¥å¯ä¸­æ–­æ›´æ–°")]),t._v(" å¯ä»¥ç†è§£ä¸ºï¼šæ›´æ–°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ‰“æ–­ï¼ˆæµè§ˆå™¨æ—¶é—´åˆ†ç‰‡ç”¨å°½æˆ–æœ‰æ›´é«˜ä¼˜ä»»åŠ¡æ’é˜Ÿï¼‰ï¼Œå½“å¯ä»¥ç»§ç»­æ‰§è¡Œæ—¶æ¢å¤ä¹‹å‰æ‰§è¡Œçš„ä¸­é—´çŠ¶æ€ã€‚")]),t._v(" "),e("p",[t._v("å…¶å®ï¼Œæµè§ˆå™¨åŸç”Ÿå°±æ”¯æŒç±»ä¼¼çš„å®ç°ï¼Œè¿™å°±æ˜¯ "),e("code",[t._v("Generator")]),t._v(" ã€‚")]),t._v(" "),e("p",[t._v("ä½†æ˜¯ "),e("code",[t._v("Generator")]),t._v(" çš„ä¸€äº›ç¼ºé™·ä½¿ "),e("code",[t._v("React")]),t._v(" å›¢é˜Ÿæ”¾å¼ƒäº†ä»–ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("ç±»ä¼¼ "),e("code",[t._v("async")]),t._v(" ï¼Œ "),e("code",[t._v("Generator")]),t._v(" ä¹Ÿæ˜¯ä¼ æŸ“æ€§çš„ï¼Œä½¿ç”¨äº† "),e("code",[t._v("Generator")]),t._v(" åˆ™ä¸Šä¸‹æ–‡çš„å…¶ä»–å‡½æ•°ä¹Ÿéœ€è¦ä½œå‡ºæ”¹å˜ã€‚è¿™æ ·å¿ƒæ™ºè´Ÿæ‹…æ¯”è¾ƒé‡ã€‚")]),t._v(" "),e("li",[e("code",[t._v("Generator")]),t._v(" æ‰§è¡Œçš„ä¸­é—´çŠ¶æ€æ˜¯ä¸Šä¸‹æ–‡å…³è”çš„ã€‚")])]),t._v(" "),e("p",[t._v("è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("doWork")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("doExpensiveWorkA")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("doExpensiveWorkB")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" z "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("doExpensiveWorkC")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" z"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("æ¯å½“æµè§ˆå™¨æœ‰ç©ºé—²æ—¶é—´éƒ½ä¼šä¾æ¬¡æ‰§è¡Œå…¶ä¸­ä¸€ä¸ª "),e("code",[t._v("doExpensiveWork")]),t._v(" ï¼Œå½“æ—¶é—´ç”¨å°½åˆ™ä¼šä¸­æ–­ï¼Œå½“å†æ¬¡æ¢å¤æ—¶ä¼šä»ä¸­æ–­ä½ç½®ç»§ç»­æ‰§è¡Œã€‚")]),t._v(" "),e("p",[t._v("åªè€ƒè™‘â€œå•ä¸€ä¼˜å…ˆçº§ä»»åŠ¡çš„ä¸­æ–­ä¸ç»§ç»­â€æƒ…å†µä¸‹ "),e("code",[t._v("Generator")]),t._v(" å¯ä»¥å¾ˆå¥½çš„å®ç°å¼‚æ­¥å¯ä¸­æ–­æ›´æ–°ã€‚")]),t._v(" "),e("p",[t._v("ä½†æ˜¯å½“æˆ‘ä»¬è€ƒè™‘â€œé«˜ä¼˜å…ˆçº§ä»»åŠ¡æ’é˜Ÿâ€çš„æƒ…å†µï¼Œå¦‚æœæ­¤æ—¶å·²ç»å®Œæˆ "),e("code",[t._v("doExpensiveWorkA")]),t._v(" ä¸ "),e("code",[t._v("doExpensiveWorkB")]),t._v(" è®¡ç®—å‡ºxä¸yã€‚")]),t._v(" "),e("p",[t._v("æ­¤æ—¶Bç»„ä»¶æ¥æ”¶åˆ°ä¸€ä¸ªé«˜ä¼˜æ›´æ–°ï¼Œç”±äº "),e("code",[t._v("Generator")]),t._v(" æ‰§è¡Œçš„ä¸­é—´çŠ¶æ€æ˜¯ä¸Šä¸‹æ–‡å…³è”çš„ï¼Œæ‰€ä»¥è®¡ç®—yæ—¶æ— æ³•å¤ç”¨ä¹‹å‰å·²ç»è®¡ç®—å‡ºçš„xï¼Œéœ€è¦é‡æ–°è®¡ç®—ã€‚")]),t._v(" "),e("p",[t._v("å¦‚æœé€šè¿‡å…¨å±€å˜é‡ä¿å­˜ä¹‹å‰æ‰§è¡Œçš„ä¸­é—´çŠ¶æ€ï¼Œåˆä¼šå¼•å…¥æ–°çš„å¤æ‚åº¦ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥å‚è€ƒè¿™ä¸ª"),e("a",{attrs:{href:"https://github.com/facebook/react/issues/7942#issuecomment-254987818",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("åŸºäºè¿™äº›åŸå› ï¼Œ "),e("code",[t._v("React")]),t._v(" æ²¡æœ‰é‡‡ç”¨ "),e("code",[t._v("Generator")]),t._v(" å®ç°åè°ƒå™¨ã€‚")]),t._v(" "),e("h4",{attrs:{id:"ä»£æ•°æ•ˆåº”å’Œfiber"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä»£æ•°æ•ˆåº”å’Œfiber"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ä»£æ•°æ•ˆåº”å’ŒFiber")])]),t._v(" "),e("p",[e("code",[t._v("Fiber")]),t._v(" å¹¶ä¸æ˜¯è®¡ç®—æœºæœ¯è¯­ä¸­çš„æ–°åè¯ï¼Œä»–çš„ä¸­æ–‡ç¿»è¯‘å«åšçº¤ç¨‹ï¼Œä¸ "),e("code",[t._v("è¿›ç¨‹ï¼ˆProcessï¼‰")]),t._v(" ã€ "),e("code",[t._v("çº¿ç¨‹ï¼ˆThreadï¼‰")]),t._v(" ã€ "),e("code",[t._v("åç¨‹ï¼ˆCoroutineï¼‰")]),t._v(" åŒä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚")]),t._v(" "),e("p",[t._v("åœ¨å¾ˆå¤šæ–‡ç« ä¸­å°†çº¤ç¨‹ç†è§£ä¸ºåç¨‹çš„ä¸€ç§å®ç°ã€‚åœ¨ "),e("code",[t._v("JS")]),t._v(" ä¸­ï¼Œåç¨‹çš„å®ç°ä¾¿æ˜¯ "),e("code",[t._v("Generator")]),t._v(" ã€‚")]),t._v(" "),e("p",[t._v("æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°† "),e("code",[t._v("çº¤ç¨‹(Fiber)")]),t._v(" ã€ "),e("code",[t._v("åç¨‹(Generator)")]),t._v(" ç†è§£ä¸ºä»£æ•°æ•ˆåº”æ€æƒ³åœ¨JSä¸­çš„ä½“ç°ã€‚")]),t._v(" "),e("p",[e("code",[t._v("React Fiber")]),t._v(" å¯ä»¥ç†è§£ä¸ºï¼š")]),t._v(" "),e("p",[e("code",[t._v("React")]),t._v(" å†…éƒ¨å®ç°çš„ä¸€å¥—çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚æ”¯æŒä»»åŠ¡ä¸åŒä¼˜å…ˆçº§ï¼Œå¯ä¸­æ–­ä¸æ¢å¤ï¼Œå¹¶ä¸”æ¢å¤åå¯ä»¥å¤ç”¨ä¹‹å‰çš„ä¸­é—´çŠ¶æ€ã€‚")]),t._v(" "),e("p",[t._v("å…¶ä¸­æ¯ä¸ªä»»åŠ¡æ›´æ–°å•å…ƒä¸º "),e("code",[t._v("React Element")]),t._v(" å¯¹åº”çš„ "),e("code",[t._v("Fiber")]),t._v(" èŠ‚ç‚¹ã€‚")]),t._v(" "),e("h3",{attrs:{id:"å®ç°åŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°åŸç†"}},[t._v("#")]),t._v(" å®ç°åŸç†")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("React")]),t._v(" ä¸­ "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" æœ‰ä¸€ä¸ªæ­£å¼çš„ç§°å‘¼ â€”â€” "),e("code",[t._v("Fiber")])]),t._v(" "),e("h4",{attrs:{id:"èµ·æº"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#èµ·æº"}},[t._v("#")]),t._v(" èµ·æº")]),t._v(" "),e("blockquote",[e("p",[t._v("æœ€æ—©çš„Fiberå®˜æ–¹è§£é‡Šæ¥æºäº2016å¹´ React å›¢é˜Ÿæˆå‘˜ Acdlite çš„ä¸€ç¯‡"),e("a",{attrs:{href:"https://github.com/acdlite/react-fiber-architecture",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»‹ç»"),e("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),e("p",[t._v("ä»ä¸Šä¸€ç« çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ï¼š")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("React v15")]),t._v(" åŠä»¥å‰ï¼Œ "),e("code",[t._v("Reconciler")]),t._v(" é‡‡ç”¨ "),e("code",[t._v("é€’å½’")]),t._v(" çš„æ–¹å¼åˆ›å»ºè™šæ‹ŸDOMï¼Œé€’å½’è¿‡ç¨‹æ˜¯ä¸èƒ½ä¸­æ–­çš„ã€‚å¦‚æœç»„ä»¶æ ‘çš„å±‚çº§å¾ˆæ·±ï¼Œé€’å½’ä¼šå ç”¨çº¿ç¨‹å¾ˆå¤šæ—¶é—´ï¼Œé€ æˆå¡é¡¿ã€‚")]),t._v(" "),e("p",[t._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ "),e("code",[t._v("React v16")]),t._v(" å°† "),e("code",[t._v("é€’å½’")]),t._v(" çš„æ— æ³•ä¸­æ–­çš„æ›´æ–°é‡æ„ä¸º "),e("code",[t._v("å¼‚æ­¥å¯ä¸­æ–­")]),t._v(" æ›´æ–°ï¼Œç”±äºæ›¾ç»ç”¨äºé€’å½’çš„ "),e("code",[t._v("è™šæ‹ŸDOM")]),t._v(" æ•°æ®ç»“æ„å·²ç»æ— æ³•æ»¡è¶³éœ€è¦ã€‚äºæ˜¯ï¼Œå…¨æ–°çš„ "),e("code",[t._v("Fiberæ¶æ„")]),t._v(" åº”è¿è€Œç”Ÿã€‚")]),t._v(" "),e("h4",{attrs:{id:"å«ä¹‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å«ä¹‰"}},[t._v("#")]),t._v(" å«ä¹‰")]),t._v(" "),e("p",[e("code",[t._v("Fiber")]),t._v(" åŒ…å«ä¸‰å±‚å«ä¹‰ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("ä½œä¸ºæ¶æ„æ¥è¯´ï¼Œä¹‹å‰ "),e("code",[t._v("React v15")]),t._v(" çš„ "),e("code",[t._v("Reconciler")]),t._v(" é‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œï¼Œæ•°æ®ä¿å­˜åœ¨é€’å½’è°ƒç”¨æ ˆä¸­ï¼Œæ‰€ä»¥è¢«ç§°ä¸º "),e("code",[t._v("Stack Reconciler")]),t._v(" ã€‚ "),e("code",[t._v("React v16")]),t._v(" çš„ "),e("code",[t._v("Reconciler")]),t._v(" åŸºäº "),e("code",[t._v("Fiber")]),t._v(" èŠ‚ç‚¹å®ç°ï¼Œè¢«ç§°ä¸º "),e("code",[t._v("Fiber Reconciler")]),t._v(" ã€‚")]),t._v(" "),e("li",[t._v("ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„æ¥è¯´ï¼Œæ¯ä¸ª "),e("code",[t._v("Fiber")]),t._v(" èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ª "),e("code",[t._v("React element")]),t._v(" ï¼Œä¿å­˜äº†è¯¥ç»„ä»¶çš„ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶/ç±»ç»„ä»¶/åŸç”Ÿç»„ä»¶ç­‰ï¼‰ã€å¯¹åº”çš„ "),e("code",[t._v("DOMèŠ‚ç‚¹")]),t._v(" ç­‰ä¿¡æ¯ã€‚")]),t._v(" "),e("li",[t._v("ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒæ¥è¯´ï¼Œæ¯ä¸ª "),e("code",[t._v("Fiber")]),t._v(" èŠ‚ç‚¹ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ä¸­è¯¥ç»„ä»¶æ”¹å˜çš„çŠ¶æ€ã€è¦æ‰§è¡Œçš„å·¥ä½œï¼ˆéœ€è¦è¢«åˆ é™¤/è¢«æ’å…¥é¡µé¢ä¸­/è¢«æ›´æ–°ç­‰ï¼‰ã€‚")])]),t._v(" "),e("h4",{attrs:{id:"ç»“æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç»“æ„"}},[t._v("#")]),t._v(" ç»“æ„")]),t._v(" "),e("p",[t._v("ä½ å¯ä»¥ä»è¿™é‡Œçœ‹åˆ°"),e("a",{attrs:{href:"https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactFiber.new.js#L116",target:"_blank",rel:"noopener noreferrer"}},[t._v("FiberèŠ‚ç‚¹çš„å±æ€§å®šä¹‰"),e("OutboundLink")],1),t._v("ã€‚è™½ç„¶å±æ€§å¾ˆå¤šï¼Œä½†æˆ‘ä»¬å¯ä»¥æŒ‰ä¸‰å±‚å«ä¹‰å°†ä»–ä»¬åˆ†ç±»æ¥çœ‹ã€‚")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// packages/react-reconciler/src/ReactFiber.new.js")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("FiberNode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("tag"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" WorkTag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  pendingProps"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mixed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TypeOfMode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹é™æ€å±æ€§")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elementType "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é“¾æ¥å…¶ä»–Fiberå®ä¾‹çš„å±æ€§")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ref "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pendingProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingProps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateQueue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Effects")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flags "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoFlags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subtreeFlags "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoFlags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deletions "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ä¼˜å…ˆçº§ç›¸å…³å±æ€§")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lanes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childLanes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alternate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("enableProfilerTimer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Note: The following is done to avoid a v8 performance cliff.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Initializing the fields below to smis and later updating them with")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double values will cause Fibers to end up having separate shapes.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This behavior/bug has something to do with Object.preventExtension().")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Fortunately this only impacts DEV builds.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Unfortunately it makes React unusably slow for some applications.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// To work around this, initialize the fields below with doubles.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Learn more about this here:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/facebook/react/issues/14365")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://bugs.chromium.org/p/v8/issues/detail?id=8538")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actualDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actualStartTime "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selfBaseDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("treeBaseDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It's okay to replace the initial doubles with smis after initialization.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This won't trigger the performance cliff mentioned above,")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// and it simplifies other profiler code (including DevTools).")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actualDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actualStartTime "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selfBaseDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("treeBaseDuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br"),e("span",{staticClass:"line-number"},[t._v("35")]),e("br"),e("span",{staticClass:"line-number"},[t._v("36")]),e("br"),e("span",{staticClass:"line-number"},[t._v("37")]),e("br"),e("span",{staticClass:"line-number"},[t._v("38")]),e("br"),e("span",{staticClass:"line-number"},[t._v("39")]),e("br"),e("span",{staticClass:"line-number"},[t._v("40")]),e("br"),e("span",{staticClass:"line-number"},[t._v("41")]),e("br"),e("span",{staticClass:"line-number"},[t._v("42")]),e("br"),e("span",{staticClass:"line-number"},[t._v("43")]),e("br"),e("span",{staticClass:"line-number"},[t._v("44")]),e("br"),e("span",{staticClass:"line-number"},[t._v("45")]),e("br"),e("span",{staticClass:"line-number"},[t._v("46")]),e("br"),e("span",{staticClass:"line-number"},[t._v("47")]),e("br"),e("span",{staticClass:"line-number"},[t._v("48")]),e("br"),e("span",{staticClass:"line-number"},[t._v("49")]),e("br"),e("span",{staticClass:"line-number"},[t._v("50")]),e("br"),e("span",{staticClass:"line-number"},[t._v("51")]),e("br"),e("span",{staticClass:"line-number"},[t._v("52")]),e("br"),e("span",{staticClass:"line-number"},[t._v("53")]),e("br"),e("span",{staticClass:"line-number"},[t._v("54")]),e("br"),e("span",{staticClass:"line-number"},[t._v("55")]),e("br"),e("span",{staticClass:"line-number"},[t._v("56")]),e("br"),e("span",{staticClass:"line-number"},[t._v("57")]),e("br"),e("span",{staticClass:"line-number"},[t._v("58")]),e("br"),e("span",{staticClass:"line-number"},[t._v("59")]),e("br"),e("span",{staticClass:"line-number"},[t._v("60")]),e("br"),e("span",{staticClass:"line-number"},[t._v("61")]),e("br"),e("span",{staticClass:"line-number"},[t._v("62")]),e("br"),e("span",{staticClass:"line-number"},[t._v("63")]),e("br"),e("span",{staticClass:"line-number"},[t._v("64")]),e("br"),e("span",{staticClass:"line-number"},[t._v("65")]),e("br"),e("span",{staticClass:"line-number"},[t._v("66")]),e("br"),e("span",{staticClass:"line-number"},[t._v("67")]),e("br"),e("span",{staticClass:"line-number"},[t._v("68")]),e("br"),e("span",{staticClass:"line-number"},[t._v("69")]),e("br"),e("span",{staticClass:"line-number"},[t._v("70")]),e("br"),e("span",{staticClass:"line-number"},[t._v("71")]),e("br")])]),e("ul",[e("li",[e("strong",[t._v("æ¶æ„æ–¹é¢")])])]),t._v(" "),e("p",[t._v("æ¯ä¸ª "),e("code",[t._v("FiberèŠ‚ç‚¹")]),t._v(" æœ‰ä¸ªå¯¹åº”çš„ "),e("code",[t._v("React element")]),t._v(" ï¼Œå¤šä¸ª "),e("code",[t._v("FiberèŠ‚ç‚¹")]),t._v(" æ˜¯å¦‚ä½•è¿æ¥å½¢æˆæ ‘å‘¢ï¼Ÿé å¦‚ä¸‹ä¸‰ä¸ªå±æ€§ï¼š")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘çˆ¶çº§FiberèŠ‚ç‚¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å­FiberèŠ‚ç‚¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å³è¾¹ç¬¬ä¸€ä¸ªå…„å¼ŸFiberèŠ‚ç‚¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("ä¸¾ä¸€ä¸ªä¾‹å­ï¼š")]),t._v(" "),e("div",{staticClass:"language-jsx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      hello\n      ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("react")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("å¯¹åº”çš„ "),e("code",[t._v("Fiber æ ‘")]),t._v(" ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n"),e("img",{attrs:{src:a(536),alt:"fiber-tree"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("é™æ€æ•°æ®ç»“æ„")])])]),t._v(" "),e("p",[t._v("ä½œä¸ºä¸€ç§é™æ€çš„æ•°æ®ç»“æ„ï¼Œä¿å­˜äº†ç»„ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼š")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Fiberå¯¹åº”ç»„ä»¶çš„ç±»å‹ Function/Class/Host...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// keyå±æ€§")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤§éƒ¨åˆ†æƒ…å†µåŒtypeï¼ŒæŸäº›æƒ…å†µä¸åŒï¼Œæ¯”å¦‚FunctionComponentä½¿ç”¨React.memoåŒ…è£¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elementType "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¹äº FunctionComponentï¼ŒæŒ‡å‡½æ•°æœ¬èº«ï¼Œå¯¹äºClassComponentï¼ŒæŒ‡classï¼Œå¯¹äºHostComponentï¼ŒæŒ‡DOMèŠ‚ç‚¹tagName")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Fiberå¯¹åº”çš„çœŸå®DOMèŠ‚ç‚¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("ul",[e("li",[e("strong",[t._v("åŠ¨æ€å·¥ä½œå•å…ƒ")])])]),t._v(" "),e("p",[t._v("ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒï¼Œ "),e("code",[t._v("Fiber")]),t._v(" ä¸­å¦‚ä¸‹å‚æ•°ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ç›¸å…³çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­çš„æ›´æ–°æµç¨‹ä¸­ä½¿ç”¨åˆ°å…·ä½“å±æ€§æ—¶å†è¯¦ç»†ä»‹ç»ï¼š")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pendingProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingProps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateQueue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Effects")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flags "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoFlags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subtreeFlags "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoFlags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deletions "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("p",[t._v("å¦‚ä¸‹ä¸¤ä¸ªå­—æ®µä¿å­˜è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³çš„ä¿¡æ¯ï¼Œä¼šåœ¨è®²è§£ "),e("code",[t._v("Scheduler")]),t._v(" æ—¶ä»‹ç»ã€‚")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lanes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childLanes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoLanes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),e("p",[t._v("åœ¨2020å¹´5æœˆï¼Œè°ƒåº¦ä¼˜å…ˆçº§ç­–ç•¥ç»å†äº†æ¯”è¾ƒå¤§çš„é‡æ„ã€‚ä»¥ "),e("code",[t._v("expirationTime")]),t._v(" å±æ€§ä¸ºä»£è¡¨çš„ä¼˜å…ˆçº§æ¨¡å‹è¢« "),e("code",[t._v("lane")]),t._v(" å–ä»£ã€‚è¯¦è§"),e("a",{attrs:{href:"https://github.com/facebook/react/pull/18796",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ä¸ªPR"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"å·¥ä½œåŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å·¥ä½œåŸç†"}},[t._v("#")]),t._v(" å·¥ä½œåŸç†")]),t._v(" "),e("h4",{attrs:{id:"åŒç¼“å­˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŒç¼“å­˜"}},[t._v("#")]),t._v(" åŒç¼“å­˜")]),t._v(" "),e("p",[t._v("é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ â€œåŒç¼“å­˜â€ æŠ€æœ¯ã€‚è¿™é‡Œç”¨æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ "),e("code",[t._v("canvas")]),t._v(" æ¥ä¸¾ä¾‹ã€‚")]),t._v(" "),e("p",[t._v("å½“æˆ‘ä»¬ç”¨ "),e("code",[t._v("canvas")]),t._v(" ç»˜åˆ¶åŠ¨ç”»ï¼Œæ¯ä¸€å¸§ç»˜åˆ¶å‰éƒ½ä¼šè°ƒç”¨ "),e("code",[t._v("ctx.clearRect")]),t._v(" æ¸…é™¤ä¸Šä¸€å¸§çš„ç”»é¢ã€‚")]),t._v(" "),e("p",[t._v("å¦‚æœå½“å‰å¸§ç”»é¢è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå¯¼è‡´æ¸…é™¤ä¸Šä¸€å¸§ç”»é¢åˆ°ç»˜åˆ¶å½“å‰å¸§ç”»é¢ä¹‹é—´æœ‰è¾ƒé•¿é—´éš™ï¼Œå°±ä¼šå‡ºç°ç™½å±ã€‚")]),t._v(" "),e("p",[t._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å†…å­˜ä¸­ç»˜åˆ¶å½“å‰å¸§åŠ¨ç”»ï¼Œç»˜åˆ¶å®Œæ¯•åç›´æ¥ç”¨å½“å‰å¸§æ›¿æ¢ä¸Šä¸€å¸§ç”»é¢ï¼Œç”±äºçœå»äº†ä¸¤å¸§æ›¿æ¢é—´çš„è®¡ç®—æ—¶é—´ï¼Œä¸ä¼šå‡ºç°ä»ç™½å±åˆ°å‡ºç°ç”»é¢çš„é—ªçƒæƒ…å†µã€‚")]),t._v(" "),e("p",[t._v("è¿™ç§"),e("strong",[t._v("åœ¨å†…å­˜ä¸­æ„å»ºå¹¶ç›´æ¥æ›¿æ¢çš„æŠ€æœ¯")]),t._v("å«åšåŒç¼“å­˜ã€‚")]),t._v(" "),e("p",[e("code",[t._v("React")]),t._v(" ä½¿ç”¨â€œåŒç¼“å­˜â€æ¥å®Œæˆ "),e("code",[t._v("Fiberæ ‘")]),t._v(" çš„æ„å»ºä¸æ›¿æ¢â€”â€”å¯¹åº”ç€DOMæ ‘çš„åˆ›å»ºä¸æ›´æ–°ã€‚")]),t._v(" "),e("h4",{attrs:{id:"åŒç¼“å­˜fiberæ ‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŒç¼“å­˜fiberæ ‘"}},[t._v("#")]),t._v(" åŒç¼“å­˜Fiberæ ‘")]),t._v(" "),e("p",[t._v("åœ¨ "),e("code",[t._v("React")]),t._v(" ä¸­æœ€å¤šä¼šåŒæ—¶å­˜åœ¨ä¸¤æ£µ "),e("code",[t._v("Fiberæ ‘")]),t._v(" ã€‚å½“å‰å±å¹•ä¸Šæ˜¾ç¤ºå†…å®¹å¯¹åº”çš„ "),e("code",[t._v("Fiberæ ‘")]),t._v(" ç§°ä¸º "),e("code",[t._v("Current Fiber Tree")]),t._v(" ï¼Œæ­£åœ¨å†…å­˜ä¸­æ„å»ºçš„ "),e("code",[t._v("Fiberæ ‘")]),t._v(" ç§°ä¸º "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ã€‚")]),t._v(" "),e("p",[e("code",[t._v("Current Fiber Tree")]),t._v(" ä¸­çš„ "),e("code",[t._v("FiberèŠ‚ç‚¹")]),t._v(" è¢«ç§°ä¸º "),e("code",[t._v("current fiber")]),t._v(" ï¼Œ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ä¸­çš„ "),e("code",[t._v("FiberèŠ‚ç‚¹")]),t._v(" è¢«ç§°ä¸º "),e("code",[t._v("workInProgress fiber")]),t._v(" "),e("code",[t._v("ï¼Œä»–ä»¬é€šè¿‡alternate")]),t._v(" å±æ€§è¿æ¥ã€‚")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("workInProgress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alternate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncurrent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alternate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" workInProgress"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[e("code",[t._v("React")]),t._v(" åº”ç”¨çš„æ ¹èŠ‚ç‚¹é€šè¿‡ "),e("code",[t._v("current")]),t._v(" æŒ‡é’ˆåœ¨ä¸åŒ "),e("code",[t._v("Fiberæ ‘")]),t._v(" çš„ "),e("code",[t._v("rootFiber")]),t._v(" é—´åˆ‡æ¢æ¥å®ç° "),e("code",[t._v("Fiberæ ‘")]),t._v(" çš„åˆ‡æ¢ã€‚")]),t._v(" "),e("p",[t._v("å½“ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" æ„å»ºå®Œæˆäº¤ç»™ "),e("code",[t._v("Renderer")]),t._v(" æ¸²æŸ“åœ¨é¡µé¢ä¸Šåï¼Œåº”ç”¨æ ¹èŠ‚ç‚¹çš„ "),e("code",[t._v("current")]),t._v(" æŒ‡é’ˆæŒ‡å‘ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ï¼Œæ­¤æ—¶ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" å°±å˜ä¸º "),e("code",[t._v("Current Fiber Tree")]),t._v(" ã€‚")]),t._v(" "),e("p",[t._v("æ¯æ¬¡çŠ¶æ€æ›´æ–°éƒ½ä¼šäº§ç”Ÿæ–°çš„ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ï¼Œé€šè¿‡ "),e("code",[t._v("current")]),t._v(" ä¸ "),e("code",[t._v("workInProgress")]),t._v(" çš„æ›¿æ¢ï¼Œå®ŒæˆDOMæ›´æ–°ã€‚")]),t._v(" "),e("h4",{attrs:{id:"mountæ—¶æ„å»ºfiber-tree"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mountæ—¶æ„å»ºfiber-tree"}},[t._v("#")]),t._v(" mountæ—¶æ„å»ºFiber tree")]),t._v(" "),e("p",[t._v("è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š")]),t._v(" "),e("div",{staticClass:"language-jsx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" add"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),e("span",{pre:!0,attrs:{class:"token script language-javascript"}},[e("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nReactDOM"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("ol",[e("li",[t._v("é¦–å…ˆï¼Œé¦–æ¬¡æ‰§è¡Œ "),e("code",[t._v("ReactDOM.render")]),t._v(" ä¼šåˆ›å»º "),e("code",[t._v("fiberRootNode")]),t._v(" ï¼ˆæºç ä¸­å« "),e("code",[t._v("fiberRoot")]),t._v(" ï¼‰å’Œ "),e("code",[t._v("rootFiber")]),t._v(" ã€‚å…¶ä¸­ "),e("code",[t._v("fiberRootNode")]),t._v(" æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¹èŠ‚ç‚¹ï¼Œ "),e("code",[t._v("rootFiber")]),t._v(" æ˜¯"),e("code",[t._v("<App/>")]),t._v("æ‰€åœ¨ç»„ä»¶æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚")])]),t._v(" "),e("p",[t._v("ä¹‹æ‰€ä»¥è¦åŒºåˆ† "),e("code",[t._v("fiberRootNode")]),t._v(" ä¸ "),e("code",[t._v("rootFiber")]),t._v(" ï¼Œæ˜¯å› ä¸ºåœ¨åº”ç”¨ä¸­æˆ‘ä»¬å¯ä»¥å¤šæ¬¡è°ƒç”¨ "),e("code",[t._v("ReactDOM.render")]),t._v(" æ¸²æŸ“ä¸åŒçš„ç»„ä»¶æ ‘ï¼Œä»–ä»¬ä¼šæ‹¥æœ‰ä¸åŒçš„ "),e("code",[t._v("rootFiber")]),t._v(" ã€‚ä½†æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¹èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ "),e("code",[t._v("fiberRootNode")]),t._v(" ã€‚")]),t._v(" "),e("p",[e("code",[t._v("fiberRootNode")]),t._v(" çš„ "),e("code",[t._v("current")]),t._v(" ä¼šæŒ‡å‘å½“å‰é¡µé¢ä¸Šå·²æ¸²æŸ“å†…å®¹å¯¹åº”å¯¹ "),e("code",[t._v("Fiberæ ‘")]),t._v(" ï¼Œè¢«ç§°ä¸º "),e("code",[t._v("Current Fiber Tree")]),t._v(" ã€‚\n"),e("img",{attrs:{src:a(537),alt:"mount-fiber-tree-1"}})]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// packages/react-reconciler/src/ReactFiberRoot.new.js -> createFiberRoot function")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Cyclic construction. This cheats the type system right now because")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// stateNode is any.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uninitializedFiber "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHostRootFiber")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nroot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uninitializedFiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("ç”±äºæ˜¯é¦–å±æ¸²æŸ“ï¼Œé¡µé¢ä¸­è¿˜æ²¡æœ‰æŒ‚è½½ä»»ä½• "),e("code",[t._v("DOM")]),t._v(" ï¼Œæ‰€ä»¥ "),e("code",[t._v("fiberRootNode.current")]),t._v(" æŒ‡å‘çš„ "),e("code",[t._v("rootFiber")]),t._v(" æ²¡æœ‰ä»»ä½•å­ "),e("code",[t._v("FiberèŠ‚ç‚¹")]),t._v(" ï¼ˆå³current Fiberæ ‘ä¸ºç©ºï¼‰ã€‚")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("æ¥ä¸‹æ¥è¿›å…¥ "),e("code",[t._v("render")]),t._v(" é˜¶æ®µï¼Œæ ¹æ®ç»„ä»¶è¿”å›çš„ "),e("code",[t._v("JSX")]),t._v(" åœ¨å†…å­˜ä¸­ä¾æ¬¡åˆ›å»º "),e("code",[t._v("Fiber èŠ‚ç‚¹")]),t._v(" å¹¶è¿æ¥åœ¨ä¸€èµ·æ„å»º "),e("code",[t._v("Fiber æ ‘")]),t._v(" ï¼Œè¢«ç§°ä¸º "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ã€‚ï¼ˆä¸‹å›¾ä¸­å³ä¾§ä¸ºå†…å­˜ä¸­æ„å»ºçš„æ ‘ï¼Œå·¦ä¾§ä¸ºé¡µé¢æ˜¾ç¤ºçš„æ ‘ï¼‰\n"),e("img",{attrs:{src:a(538),alt:"mount-fiber-tree-2"}})]),t._v(" "),e("li",[t._v("å›¾ä¸­å³ä¾§å·²æ„å»ºå®Œçš„ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" åœ¨ "),e("code",[t._v("commité˜¶æ®µ")]),t._v(" æ¸²æŸ“åˆ°é¡µé¢ã€‚")])]),t._v(" "),e("p",[t._v("æ­¤æ—¶DOMæ›´æ–°ä¸ºå³ä¾§æ ‘å¯¹åº”çš„æ ·å­ã€‚"),e("code",[t._v("fiberRootNode")]),t._v(" çš„ "),e("code",[t._v("current")]),t._v(" æŒ‡é’ˆæŒ‡å‘ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ä½¿å…¶å˜ä¸º "),e("code",[t._v("Current Fiber Tree")]),t._v(" ã€‚\n"),e("img",{attrs:{src:a(539),alt:"mount-fiber-tree-3"}})]),t._v(" "),e("h4",{attrs:{id:"updateæ—¶æ›¿æ¢fiber-tree"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updateæ—¶æ›¿æ¢fiber-tree"}},[t._v("#")]),t._v(" updateæ—¶æ›¿æ¢Fiber tree")]),t._v(" "),e("ol",[e("li",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬ç‚¹å‡» p èŠ‚ç‚¹è§¦å‘çŠ¶æ€æ”¹å˜ï¼Œè¿™ä¼šå¼€å¯ä¸€æ¬¡æ–°çš„ "),e("code",[t._v("renderé˜¶æ®µ")]),t._v(" å¹¶æ„å»ºä¸€æ£µæ–°çš„ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" ã€‚\n"),e("img",{attrs:{src:a(540),alt:"update-fiber-tree-1"}}),t._v("\nå’Œ "),e("code",[t._v("mount")]),t._v(" æ—¶ä¸€æ ·ï¼Œ"),e("code",[t._v("workInProgress fiber")]),t._v(" çš„åˆ›å»ºå¯ä»¥å¤ç”¨ "),e("code",[t._v("Current Fiber Tree")]),t._v(" å¯¹åº”çš„èŠ‚ç‚¹æ•°æ®ã€‚")])]),t._v(" "),e("blockquote",[e("p",[t._v("è¿™ä¸ªå†³å®šæ˜¯å¦å¤ç”¨çš„è¿‡ç¨‹å°±æ˜¯Diffç®—æ³•")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" åœ¨ "),e("code",[t._v("renderé˜¶æ®µ")]),t._v(" å®Œæˆæ„å»ºåè¿›å…¥ "),e("code",[t._v("commité˜¶æ®µ")]),t._v(" æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚æ¸²æŸ“å®Œæ¯•åï¼Œ "),e("code",[t._v("WorkInProgress Fiber Tree")]),t._v(" å˜ä¸º "),e("code",[t._v("Current Fiber Tree")]),t._v(" ã€‚\n"),e("img",{attrs:{src:a(541),alt:"update-fiber-tree-2"}})])]),t._v(" "),e("h2",{attrs:{id:"æ–‡ä»¶ç»“æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡ä»¶ç»“æ„"}},[t._v("#")]),t._v(" æ–‡ä»¶ç»“æ„")]),t._v(" "),e("p",[t._v("æ ¹æ®å‰æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ "),e("code",[t._v("React v16")]),t._v(" çš„æ¶æ„åˆ†ä¸ºä¸‰å±‚ï¼š")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Scheduler")]),t._v("ï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥ Reconciler")]),t._v(" "),e("li",[e("strong",[t._v("Reconciler")]),t._v("ï¼ˆåè°ƒå™¨ï¼‰â€”â€” è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶")]),t._v(" "),e("li",[e("strong",[t._v("Renderer")]),t._v("ï¼ˆæ¸²æŸ“å™¨ï¼‰â€”â€” è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š")])]),t._v(" "),e("p",[t._v("é‚£ä¹ˆæ¶æ„æ˜¯å¦‚ä½•ä½“ç°åœ¨æºç çš„æ–‡ä»¶ç»“æ„ä¸Šå‘¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§ã€‚")]),t._v(" "),e("h3",{attrs:{id:"é¡¶å±‚ç›®å½•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¡¶å±‚ç›®å½•"}},[t._v("#")]),t._v(" é¡¶å±‚ç›®å½•")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("æ ¹ç›®å½•\n  â”œâ”€â”€ fixtures        # åŒ…å«ä¸€äº›ç»™è´¡çŒ®è€…å‡†å¤‡çš„å°å‹ React æµ‹è¯•é¡¹ç›®\n  â”œâ”€â”€ packages        # åŒ…å«å…ƒæ•°æ®ï¼ˆæ¯”å¦‚ package.jsonï¼‰å’Œ React ä»“åº“ä¸­æ‰€æœ‰ package çš„æºç ï¼ˆå­ç›®å½• srcï¼‰\n  â”œâ”€â”€ scripts         # å„ç§å·¥å…·é“¾çš„è„šæœ¬ï¼Œæ¯”å¦‚gitã€jestã€eslintç­‰\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("å®é™…ä¸Š "),e("code",[t._v("React")]),t._v(" çš„é¡¹ç›®é‡‡ç”¨ "),e("code",[t._v("Monorepo")]),t._v(" ç»“æ„æ¥è¿›è¡Œç®¡ç†çš„ï¼Œä¸åŒçš„åŠŸèƒ½åˆ†åœ¨ä¸åŒçš„ "),e("code",[t._v("package")]),t._v(" é‡Œã€‚æ‰€ä»¥æˆ‘ä»¬é‡ç‚¹å…³æ³¨ "),e("code",[t._v("packages")]),t._v(" æ–‡ä»¶å¤¹ã€‚")]),t._v(" "),e("h3",{attrs:{id:"packagesç›®å½•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#packagesç›®å½•"}},[t._v("#")]),t._v(" packagesç›®å½•")]),t._v(" "),e("p",[t._v("ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹éå¸¸å¤šï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ï¼š")]),t._v(" "),e("h4",{attrs:{id:"react"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" react")]),t._v(" "),e("p",[e("code",[t._v("React")]),t._v(" çš„æ ¸å¿ƒï¼ŒåŒ…å«æ‰€æœ‰å…¨å±€ "),e("code",[t._v("React API")]),t._v(" ï¼Œå¦‚ï¼š")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("React.createElement")])]),t._v(" "),e("li",[e("code",[t._v("React.Component")])]),t._v(" "),e("li",[e("code",[t._v("React.Children")])])]),t._v(" "),e("p",[t._v("è¿™äº› "),e("code",[t._v("API")]),t._v(" æ˜¯å…¨å¹³å°é€šç”¨çš„ï¼Œå®ƒä¸åŒ…å« "),e("code",[t._v("ReactDOM")]),t._v(" ã€ "),e("code",[t._v("ReactNative")]),t._v(" ç­‰å¹³å°ç‰¹å®šçš„ä»£ç ã€‚åœ¨ NPM ä¸Šä½œä¸ºå•ç‹¬çš„ä¸€ä¸ª"),e("a",{attrs:{href:"https://www.npmjs.com/package/react",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒ…"),e("OutboundLink")],1),t._v("å‘å¸ƒã€‚")]),t._v(" "),e("h4",{attrs:{id:"scheduler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scheduler"}},[t._v("#")]),t._v(" scheduler")]),t._v(" "),e("p",[e("code",[t._v("Scheduler")]),t._v(" ï¼ˆè°ƒåº¦å™¨ï¼‰çš„å®ç°ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªå•ç‹¬çš„"),e("a",{attrs:{href:"https://www.npmjs.com/package/scheduler",target:"_blank",rel:"noopener noreferrer"}},[t._v("NPMåŒ…"),e("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),e("h4",{attrs:{id:"rendererç›¸å…³æ–‡ä»¶å¤¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rendererç›¸å…³æ–‡ä»¶å¤¹"}},[t._v("#")]),t._v(" Rendererç›¸å…³æ–‡ä»¶å¤¹")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("packages\n  â”œâ”€â”€react-art\n  â”œâ”€â”€react-dom                 # æ³¨æ„è¿™åŒæ—¶æ˜¯DOMå’ŒSSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰çš„å…¥å£\n  â”œâ”€â”€react-native-renderer\n  â”œâ”€â”€react-noop-renderer       # ç”¨äºdebug fiberï¼ˆåé¢ä¼šä»‹ç»fiberï¼‰\n  â”œâ”€â”€react-test-renderer\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("h4",{attrs:{id:"react-reconcileræ–‡ä»¶å¤¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-reconcileræ–‡ä»¶å¤¹"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://www.npmjs.com/package/react-reconciler",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-reconciler"),e("OutboundLink")],1),t._v("æ–‡ä»¶å¤¹")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨ "),e("code",[t._v("react-reconciler")]),t._v(" ï¼Œåœ¨æ¥ä¸‹æ¥æºç å­¦ä¹ ä¸­ 80%çš„ä»£ç é‡éƒ½æ¥è‡ªè¿™ä¸ªåŒ…ã€‚")]),t._v(" "),e("p",[t._v("è™½ç„¶ä»–æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„åŒ…ï¼Œå†…éƒ¨çš„å¾ˆå¤šåŠŸèƒ½åœ¨æ­£å¼ç‰ˆæœ¬ä¸­è¿˜æœªå¼€æ”¾ã€‚ä½†æ˜¯ä»–ä¸€è¾¹å¯¹æ¥ "),e("code",[t._v("Scheduler")]),t._v(" ï¼Œä¸€è¾¹å¯¹æ¥ä¸åŒå¹³å°çš„ "),e("code",[t._v("Renderer")]),t._v(" ï¼Œæ„æˆäº†æ•´ä¸ª "),e("code",[t._v("React v16")]),t._v(" çš„æ¶æ„ä½“ç³»ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("è™½ç„¶è¿™å·²ç»åœ¨ React 16 ä¸­å¯ç”¨äº†ï¼Œä½†æ˜¯ async ç‰¹æ€§è¿˜æ²¡æœ‰é»˜è®¤å¼€å¯ã€‚")])]),t._v(" "),e("p",[t._v("è‡³äºç»“æ„æ€§çš„æºç æ¦‚è§ˆï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å®˜ç½‘çš„"),e("a",{attrs:{href:"https://react.docschina.org/docs/codebase-overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æºç æ¦‚è§ˆ"),e("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),e("h2",{attrs:{id:"è°ƒè¯•æºç "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒè¯•æºç "}},[t._v("#")]),t._v(" è°ƒè¯•æºç ")]),t._v(" "),e("p",[t._v("å³ä½¿ç‰ˆæœ¬å·ç›¸åŒï¼ˆå½“å‰æœ€æ–°ç‰ˆä¸º17.0.0ï¼‰ï¼Œä½†æ˜¯ "),e("code",[t._v("facebook/react")]),t._v(" é¡¹ç›® "),e("code",[t._v("master")]),t._v(" åˆ†æ”¯çš„ä»£ç å’Œæˆ‘ä»¬ä½¿ç”¨ "),e("code",[t._v("create-react-app")]),t._v(" åˆ›å»ºçš„é¡¹ç›® "),e("code",[t._v("node_modules")]),t._v(" ä¸‹çš„ "),e("code",[t._v("react")]),t._v(" é¡¹ç›®ä»£ç è¿˜æ˜¯æœ‰äº›åŒºåˆ«ã€‚")]),t._v(" "),e("p",[t._v("å› ä¸º "),e("code",[t._v("React")]),t._v(" çš„æ–°ä»£ç éƒ½æ˜¯ç›´æ¥æäº¤åˆ° "),e("code",[t._v("master")]),t._v(" åˆ†æ”¯ï¼Œè€Œ "),e("code",[t._v("create-react-app")]),t._v(" å†…çš„ "),e("code",[t._v("react")]),t._v(" ä½¿ç”¨çš„æ˜¯ç¨³å®šç‰ˆçš„åŒ…ã€‚")]),t._v(" "),e("p",[t._v("ä¸ºäº†å§‹ç»ˆä½¿ç”¨æœ€æ–°ç‰ˆ "),e("code",[t._v("React")]),t._v(" æ•™å­¦ï¼Œæˆ‘ä»¬è°ƒè¯•æºç éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("ä» "),e("code",[t._v("facebook/react")]),t._v(" é¡¹ç›® "),e("code",[t._v("master")]),t._v(" åˆ†æ”¯æ‹‰å–æœ€æ–°æºç ")]),t._v(" "),e("li",[t._v("åŸºäºæœ€æ–°æºç æ„å»º "),e("code",[t._v("react")]),t._v(" ã€ "),e("code",[t._v("scheduler")]),t._v(" ã€ "),e("code",[t._v("react-dom")]),t._v(" ä¸‰ä¸ªåŒ…")]),t._v(" "),e("li",[t._v("é€šè¿‡ "),e("code",[t._v("create-react-app")]),t._v(" åˆ›å»ºæµ‹è¯•é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨æ­¥éª¤2åˆ›å»ºçš„åŒ…ä½œä¸ºé¡¹ç›®ä¾èµ–çš„åŒ…")])]),t._v(" "),e("h3",{attrs:{id:"æ‹‰å–æºç "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ‹‰å–æºç "}},[t._v("#")]),t._v(" æ‹‰å–æºç ")]),t._v(" "),e("p",[t._v("æ‹‰å– "),e("code",[t._v("facebook/react")]),t._v(" ä»£ç ï¼š")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‹‰å–ä»£ç ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/facebook/react.git\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# github cli")]),t._v("\ngh repo clone facebook/react\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("å®‰è£…ä¾èµ–")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ‡å…¥åˆ°reactæºç æ‰€åœ¨æ–‡ä»¶å¤¹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" react\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£…ä¾èµ–")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("æ‰“åŒ… "),e("code",[t._v("react")]),t._v(" ã€ "),e("code",[t._v("scheduler")]),t._v(" ã€ "),e("code",[t._v("react-dom")]),t._v(" ä¸‰ä¸ªåŒ…ä¸ºdevç¯å¢ƒå¯ä»¥ä½¿ç”¨çš„cjsåŒ…ã€‚")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build react/index,react-dom/index,scheduler --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NODE\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("blockquote",[e("p",[t._v("å¯¹æ¯ä¸€æ­¥æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è€ƒReactæ–‡æ¡£"),e("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/how-to-contribute.html#development-workflow",target:"_blank",rel:"noopener noreferrer"}},[t._v("æºç è´¡çŒ®ç« èŠ‚"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),e("p",[t._v("17.0.0 ç‰ˆæœ¬æ‰§è¡Œå‘½ä»¤ï¼š")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build react,react-dom,scheduler --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NODE\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])]),t._v(" "),e("p",[t._v("ç°åœ¨æºç ç›®å½• "),e("code",[t._v("build/node_modules")]),t._v(" ä¸‹ä¼šç”Ÿæˆæœ€æ–°ä»£ç çš„åŒ…ã€‚æˆ‘ä»¬ä¸º "),e("code",[t._v("react")]),t._v(" ã€ "),e("code",[t._v("react-dom")]),t._v(" åˆ›å»º "),e("code",[t._v("yarn link")]),t._v("ã€‚")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" build/node_modules/react\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”³æ˜reactæŒ‡å‘")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" build/node_modules/react-dom\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”³æ˜react-domæŒ‡å‘")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("h3",{attrs:{id:"åˆ›å»ºé¡¹ç›®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºé¡¹ç›®"}},[t._v("#")]),t._v(" åˆ›å»ºé¡¹ç›®")]),t._v(" "),e("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡create-react-appåœ¨å…¶ä»–åœ°æ–¹åˆ›å»ºæ–°é¡¹ç›®ã€‚")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create react-app "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("YOUR-PROJECT-NAME"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("åœ¨æ–°é¡¹ç›®ä¸­ï¼Œå°†reactä¸react-dom2ä¸ªåŒ…æŒ‡å‘facebook/reactä¸‹æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„åŒ…ã€‚")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å°†é¡¹ç›®å†…çš„react react-domæŒ‡å‘ä¹‹å‰ç”³æ˜çš„åŒ…")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" react react-dom\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("è¿™æ ·åœ¨ "),e("code",[t._v("react/build/node_modules/react-dom/cjs/react-dom.development.js")]),t._v(" ä¸­çš„ä»»æ„ä¿®æ”¹éƒ½ä¼šåœ¨é¡¹ç›®è¿è¡Œæ—¶æ˜¾ç¤ºå‡ºæ¥ã€‚å¯ä»¥å¾ˆæ–¹ä¾¿æˆ‘ä»¬å¯¹æºç è¿›è¡Œè°ƒè¯•å’Œåˆ†æã€‚")])])}),[],!1,null,null,null);s.default=n.exports}}]);